<main id="main" class="main">
  <div class="container mt-20 mb-30">
    <!-- Register Complaint Section -->
    <div class="card shadow-sm p-4">
      <div class="card-body">
        <h4 class="text-primary mb-4">Register a Complaint</h4>
        <form action="/complaints/register" method="POST">
          <div class="form-group mb-3">
            <label for="complaintText" class="form-label">Your Complaint</label>
            <textarea id="complaintText" name="text" class="form-control" rows="4" placeholder="Enter your complaint..."
              required></textarea>
          </div>
          <button type="submit" class="btn btn-primary w-100">Submit Complaint</button>
        </form>
      </div>
    </div>

    <!-- Complaints List Section -->
    <div class="card shadow-sm p-4 mt-5">
      <div class="card-body">
        <h4 class="text-primary mb-4">Your Complaints</h4>

        {{#if complaints.length}}
        <ul class="list-group">
          {{#each complaints}}
          <li class="list-group-item mb-3">
            <div class="d-flex justify-content-between align-items-start">
              <div>
                <p class="mb-1"><strong>Complaint:</strong> {{this.text}}</p>
                <p class="mb-1"><strong>Status:</strong> 
                  <span class="badge 
                  {{#if (eq this.status 'Resolved')}}bg-success
                  {{else if (eq this.status 'forwarded')}}bg-info
                  {{else}}bg-warning{{/if}}">
                  {{#if (eq this.status 'forwarded')}}Forwarded to Deputy Registrar{{else}}{{this.status}}{{/if}}
                  </span>
                </p>
                {{#if this.resolutionMessage}}
                <p class="mb-1"><strong>Resolution Message:</strong> {{this.resolutionMessage}}</p>
                {{/if}}
              </div>
            </div>
          </li>
          <br>
          {{/each}}
        </ul>
        {{else}}
        <p class="text-muted">You have not registered any complaints yet.</p>
        {{/if}}
      </div>
    </div>
  </div>
</main>